<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwill.shape.repository.PostCommentRepository">
<!--
	작명 방법
	: TABLE 이름 + "-" + mapper

	작성 방법
	: 2 ~ 5번줄 추가 후, 뒤에 있는 참조하는 Repository 변경.
	: TABLE 당 하나의 mapper를 갖는다.
	: 해당 쿼리 작성 후 무슨 역할을 하는지와 작성자 이름 기재
-->
	<!-- 
	author?로 댓글 목록 가져오기
	 -->
	<select	id="selectById"
		resultType="com.itwill.shape.domain.PostComment"
		>
		SELECT *
		  FROM post_comment
		 WHERE author = #{author}
	</select>

	<!--게시판 페이지 -->
	<select id="selectCommentCountWithPid"
        resultType="java.lang.Long">
        select count(PCID) from POST_COMMENT
        where PID = #{pid}
    </select>
    
    <select id="selectByPid" 
        resultType="com.itwill.shape.domain.PostComment">
        select * from POST_COMMENT
        where PID = #{pid}
        order by MODIFIED_DATE desc
    </select>
    
    <select id="selectByPcid"
        resultType="com.itwill.shape.domain.PostComment">
        select * from POST_COMMENT where PCID = #{pcid}
    </select>
    
    <insert id="insert">
        insert into POST_COMMENT (PID, CONTENT, AUTHOR, CREATED_DATE, MODIFIED_DATE)
        values (#{pid}, #{content}, #{author}, systimestamp, systimestamp)
    </insert>
    
    <update id="update">
        update POST_COMMENT
        set CONTENT = #{content}, MODIFIED_DATE = systimestamp
        where PCID = #{pcid}
    </update>
    
    <delete id="delete">
        delete from POST_COMMENT
        where PCID = #{pcid}
    </delete>
</mapper>